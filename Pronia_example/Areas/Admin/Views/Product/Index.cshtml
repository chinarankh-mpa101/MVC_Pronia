@model List<Product>
<div class="container">
	<div class="row">

		<div class="row">
			<div class="col-4">
				<h2>Products</h2>
			</div>
			<div class="col-2">
				<a class="btn btn-success" asp-action="Create">Create</a>
			</div>

		</div>
		<table class="table table-striped">
			<thead>
				<tr>
					<th scope="col">Id</th>
					<th scope="col">Name</th>
					<th scope="col">Description</th>
					<th scope="col">Price</th>
					<th scope="col">MainImagePath</th>
					<th scope="col">HoverImagePath</th>
					<th scope="col">Category Name</th>
					<th scope="col">Rating</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (Product product in Model)
				{
					<tr>
						<th scope="row">@product.Id</th>
						<td>@product.Name</td>
						<td>@product.Description</td>
						<td>@product.Price</td>
						<td> <img src="~/assets/images/website-images/@product.MainImagePath" alt="Alternate Text" /> </td>
						<td> <img src="~/assets/images/website-images/@product.HoverImagePath" alt="Alternate Text" /> </td>
						<td>@product.Category.Name</td>

						<td>
							@for (int i = 1; i <= 5; i++)
							{
								if (i <= product.Rating)
								{
									<i class="fa fa-star text-warning"></i>
								}
								else
								{
									<i class="fa fa-star text-muted"></i>
								}
							}
						</td>
						<td>
							<a class="btn btn-warning" asp-action="Update" asp-route-id="@product.Id">Update</a>
							<a asp-action="Delete" asp-route-id="@product.Id" class="btn btn-danger deleteBtn">Delete</a>
						</td>
					</tr>
				}

			</tbody>
		</table>
	</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
	const deleteButtons=document.querySelectorAll('.deleteBtn');
	deleteButtons.forEach(btn => {
		btn.addEventListener("click", (e) => {
			e.preventDefault();
			Swal.fire({
				title: "Are you sure?",
				text: "You won't be able to revert this!",
				icon: "warning",
				showCancelButton: true,
				confirmButtonColor: "#3085d6",
				cancelButtonColor: "#d33",
				confirmButtonText: "Yes, delete it!"
			}).then((result) => {
				if (result.isConfirmed) {
					Swal.fire({
						title: "Deleted!",
						text: "Your file has been deleted.",
						icon: "success"
					});
					window.location.href=btn.href
				}
			});
		})
	})
</script>


	